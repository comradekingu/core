<template>
  <span :class="{ dark }">
    <b-badge v-if="kind" size="xl" :class="{ [`kind-${kind}`]: true }">{{
      storyTypeText
    }}</b-badge>
    {{ title || t("Sans titre")
    }}<template v-if="part"> - {{ t("partie") }} {{ part }}</template>
    <small>{{ comment }}</small>
    &nbsp;<a
      v-if="!noLink"
      target="_blank"
      :href="`https://coa.inducks.org/story.php?c=${urlEncodedStorycode}`"
    >
      {{ t("Détails de l'histoire") }}
    </a>
  </span>
</template>
<script setup>
import { BBadge } from "bootstrap-vue-3";
import { computed } from "vue";
import { useI18n } from "vue-i18n";

const { t: $t } = useI18n();
const props = defineProps({
    storycode: {
      type: String,
      required: true,
    },
    kind: {
      type: String,
      default: null,
    },
    title: {
      type: String,
      default: null,
    },
    part: {
      type: Number,
      default: null,
    },
    comment: {
      type: String,
      default: null,
    },
    noLink: {
      type: Boolean,
      default: false,
    },
    dark: {
      type: Boolean,
      default: false,
    },
  }),
  urlEncodedStorycode = computed(
    () => props.storycode && encodeURIComponent(props.storycode)
  ),
  storyTypeText = computed(() => {
    switch (props.kind.toUpperCase()) {
      case "A":
        return $t("article");
      case "C":
        return $t("couverture");
      case "F":
        return $t("détachable");
      case "G":
        return $t("jeu");
      case "I":
        return $t("illustration");
      case "K":
        return $t("strip");
      case "L":
        return $t("peinture");
      case "N":
        return $t("histoire");
      case "N_G":
        return $t("gag");
      case "P":
        return $t("peinture");
      case "T":
        return $t("texte");
    }
    return $t("autre");
  });
</script>

<style scoped lang="scss">
span {
}

.badge {
  font-size: 90%;
  width: 75px;
  color: black;

  &.kind-c {
    background: #ffcc33;
  }

  &.kind-n {
    background: #cbdced;
  }

  &.kind-n_g {
    background: #ff99ff;
  }
}

.dark {
  color: black;
}
</style>
