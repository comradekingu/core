{
  "name": "~ci",
  "engines": {
    "node": ">=18.0.0 <19.0.0"
  },
  "type": "module",
  "scripts": {
    "prod:build-docker": "export CACHE_REF=\"${REPO_NAME/:/-}:buildcache\" && echo $CACHE_REF; cd ../.. && docker buildx build . --cache-to=\"type=registry,ref=${CACHE_REF},mode=max\" --cache-from=\"type=registry,ref=${CACHE_REF}\" -t $REPO_NAME --push $@",
    "prod:deploy": "echo \"$PRODUCTION_SSH_KEY\" | ssh -t $PRODUCTION_SSH_USER@$PRODUCTION_SSH_HOST \"cd $REMOTE_ROOT/$1 && docker compose up -d --force-recreate $2\"",
    "prod:transfer-files": "tsx transfer-files.ts"
  },
  "dependencies": {
    "ssh2-sftp-client": "^11.0.0"
  },
  "devDependencies": {
    "tsx": "^4.17.0",
    "@types/ssh2-sftp-client": "^9.0.4"
  }
}